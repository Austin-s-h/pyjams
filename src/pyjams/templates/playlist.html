{% extends "base.html" %}

{% block content %}
<div class="playlist-view">
    <div class="playlist-container">
        <header class="playlist-header">
            <h1>{{ playlist.name }}</h1>
            {% if playlist.description %}
                <p class="playlist-description">{{ playlist.description }}</p>
            {% endif %}
        </header>
        
        <div class="spotify-player-full">
            <iframe src="https://open.spotify.com/embed/playlist/{{ playlist.id }}?utm_source=generator&theme=0"
                    width="100%" 
                    height="100%" 
                    frameborder="0" 
                    allowfullscreen="" 
                    allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
                    loading="lazy">
            </iframe>
        </div>

        {% if settings.ADMIN_USERNAME == current_user.id %}
            <div class="admin-controls">
                {% if playlist.id == settings.PUBLIC_PLAYLIST_ID %}
                    <div class="status-badge">Current Public Playlist</div>
                {% else %}
                    <form action="{{ url_for('set_public_playlist') }}" method="POST" class="set-public-form">
                        <input type="hidden" name="playlist_id" value="{{ playlist.id }}">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-check"></i> Set as Public Playlist
                        </button>
                    </form>
                {% endif %}
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}
